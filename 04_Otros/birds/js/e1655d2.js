var Animator={oneTimeEvents:{positions:[],events:[]},phases:[{animations:[]},{animations:[]},{animations:[]},{animations:[]},{animations:[]}],phaseLimits:null,activePhase:0,activeNav:0,CSSTransform:function(b,a,c,d){a=Modernizr.csstransforms3d?"translate3d("+a+"px,"+c+"px, 0) rotate("+d/Math.PI*180+"deg)":"translate("+a+"px,"+c+"px) rotate("+d/Math.PI*180+"deg)";b.css({"-webkit-transform":a,"-moz-transform":a,"-ms-transform":a,"-o-transform":a,transform:a,zoom:1})},update:function(b,a,c){Animator.oneTimeEvents.positions.length&&
Animator.oneTimeEvents.positions[0]<b&&(Animator.oneTimeEvents.positions.shift(),Animator.oneTimeEvents.events.shift()());Animator.phaseLimits[Animator.activePhase]<b?Animator.activePhase++:Animator.activePhase>0&&Animator.phaseLimits[Animator.activePhase-1]>b&&Animator.activePhase--;if(Animator.activePhase>0)for(i in Animator.phases[Animator.activePhase].animations)(0,Animator.phases[Animator.activePhase].animations[i])(a,c)||Animator.phases[Animator.activePhase].animations.splice(i,1)},start:function(){Animator.oneTimeEvents.positions=
[0.7,2.5,5.04,12.66];Animator.oneTimeEvents.events=[Animator.animations.shareIconsFloating,Animator.animations.pigExplode,Animator.animations.mustachePig.explode,Animator.animations.footerFreeze.explode];Animator.phaseLimits=[0.16,2.5,7.5,19,42];Animator.navLimits=[0,4,9,15,42];Animator.navLimits=[0,9,12,40,48];Animator.shareIconsFloating.init();Animator.pig.init();Animator.pigHelmet.init();Animator.animations.mustachePig.init();Animator.animations.cloudParallax.init();Animator.animations.iceteroidParallax.init();
Animator.animations.asteroids.init();Animator.animations.sliderControl.init();Animator.animations.birdTransforms.init();Animator.animations.footerFreeze.init()},animations:{}};
Animator.animations.sliderControl={init:function(){$("div#slider-1 div.flexslider").flexslider({animation:"slide",slideshow:!1,directionNav:!0,controlNav:!0,controlsContainer:".flexslider-container",manualControls:$("div#slider-1 .control-nav li"),after:removeAllPlayingFrames});$("div#slider-2 div.flexslider").flexslider({animation:"slide",slideshow:!1,directionNav:!0,controlNav:!0,controlsContainer:".flexslider-container",manualControls:$("div#slider-2 .control-nav li"),after:removeAllPlayingFrames});
$(".placeholder").not(".chinese").each(function(){var b=$(this),a=function(a){a.preventDefault();a='<iframe width="'+b.width()+'" height="'+b.height()+'" src="http://www.youtube.com/embed/'+b.data("embed")+'?autoplay=1&wmode=transparent&html5=1&rel=0" frameborder="0" allowfullscreen></iframe>';b.parent().find("iframe").remove();b.parent().find("a").css("top","-4px;");b.before(a);b.hide();log("open with "+a);return!1};b.click(a).bind("touchstart",a)});$(".placeholder.chinese").each(function(){var b=
$(this),a=function(a){a.preventDefault();a='<embed src="http://player.youku.com/player.php/sid/'+b.data("embed")+'/v.swf" autoplay="true" allowFullScreen="true" quality="high" width="'+b.width()+'" height="'+b.height()+'" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash"></embed>';b.parent().find("embed").remove();b.before(a);b.parent().on("mousemove mousedown",function(a){STARTDRAG.y=null;a.preventDefault();return!1});b.hide();log("chinese open with "+a);return!1};b.click(a).bind("touchstart",
a)})}};function removeAllPlayingFrames(b){b?(b.find("img").css("z-index","110").css("position","relative").show(),b.find("iframe,embed").remove()):$("body").find("iframe,embed").not(".comics-frame").each(function(a,b){$(b).parent().find("img").show();$(b).parent().find("iframe,embed").remove()})}
Animator.shareIconsFloating={$fb:null,$share:null,$twitter:null,$gplus:null,rads:[0,0,0,0],rotationSpeeds:[-2.0E-5,0.0040,-0.0030,0.0012],init:function(){Animator.shareIconsFloating.$share=$("section#share-buttons div.share");Animator.shareIconsFloating.$fb=$("section#share-buttons a.facebook");Animator.shareIconsFloating.$twitter=$("section#share-buttons a.twitter");Animator.shareIconsFloating.$gplus=$("section#share-buttons a.googleplus")}};
Animator.animations.shareIconsFloating=function(){Animator.phases[1].animations.push(function(b){for(i in Animator.shareIconsFloating.rotationSpeeds)Animator.shareIconsFloating.rotationSpeeds[i]>2.0E-4?Animator.shareIconsFloating.rotationSpeeds[i]-=5.0E-7*b:Animator.shareIconsFloating.rotationSpeeds[i]<-2.0E-4&&(Animator.shareIconsFloating.rotationSpeeds[i]+=5.0E-7*b);Animator.CSSTransform(Animator.shareIconsFloating.$share,0,0,Animator.shareIconsFloating.rads[0]);Animator.CSSTransform(Animator.shareIconsFloating.$fb,
0,0,Animator.shareIconsFloating.rads[1]);Animator.CSSTransform(Animator.shareIconsFloating.$twitter,0,0,Animator.shareIconsFloating.rads[2]);Animator.CSSTransform(Animator.shareIconsFloating.$gplus,0,0,Animator.shareIconsFloating.rads[3]);Animator.shareIconsFloating.rads[0]+=Animator.shareIconsFloating.rotationSpeeds[0]*b;Animator.shareIconsFloating.rads[1]+=Animator.shareIconsFloating.rotationSpeeds[1]*b;Animator.shareIconsFloating.rads[2]+=Animator.shareIconsFloating.rotationSpeeds[2]*b;Animator.shareIconsFloating.rads[3]+=
Animator.shareIconsFloating.rotationSpeeds[3]*b;return!0})};Animator.pig={position:{x:null,y:null},speed:{x:0.15,y:0.2},rad:2.6,$el:null,diameter:400,circulationSpeed:0.0010,innerRad:0,init:function(){Animator.pig.$el=$("div#pig");Animator.pig.position.x=0;Animator.pig.position.y=0;Animator.pig.speed.x=(382+Animator.pig.speed.x)/1600;Animator.pig.speed.y=(521+Animator.pig.speed.y)/1600}};
Animator.pigHelmet={position:{x:null,y:null},speed:{x:-0.2,y:0.2},$el:null,innerRad:0,circulationSpeed:0.0020,init:function(){Animator.pigHelmet.$el=$("div#pig-helmet");Animator.pigHelmet.position.x=0;Animator.pigHelmet.position.y=0}};
Animator.animations.pigExplode=function(){var b=Animator.pig;b.$el.addClass("hit");var a=Animator.pigHelmet;Animator.phases[2].animations.push(function(a){b.position.x+=b.speed.x*a;b.position.y+=b.speed.y*a;b.innerRad+=a*5*b.circulationSpeed;Animator.CSSTransform(b.$el,b.position.x,b.position.y,b.innerRad);return b.position.y>530?(Animator.phases[2].animations.push(Animator.animations.pigOrbit),!1):!0});Animator.phases[2].animations.push(function(b){a.position.x+=a.speed.x*b;a.position.y+=a.speed.y*
b;a.innerRad+=b*a.circulationSpeed;Animator.CSSTransform(a.$el,a.position.x,a.position.y,a.innerRad);return a.position.x<-1500?!1:!0})};Animator.animations.pigOrbit=function(b){var a=Animator.pig;a.position.x=726+a.diameter*Math.cos(a.rad);a.position.y=316+a.diameter*Math.sin(a.rad);a.circulationSpeed>2.0E-4&&(a.circulationSpeed-=1.0E-7*b);a.rad-=b*a.circulationSpeed;a.innerRad+=b*5*a.circulationSpeed;Animator.CSSTransform(a.$el,a.position.x,a.position.y,a.innerRad);return!0};
Animator.animations.cloudParallax={$els:[],animate:function(){var b=Animator.animations.cloudParallax;for(i in b.$els)Animator.CSSTransform(b.$els[i],(1400-PositionUpdater.bird.position.x)/8,0,0);return!0},init:function(){Animator.animations.cloudParallax.$els=[$("div#small-cloud-1"),$("div#small-cloud-2"),$("div#small-cloud-3"),$("div#small-cloud-4")];Animator.phases[2].animations.push(Animator.animations.cloudParallax.animate)}};
Animator.animations.iceteroidParallax={$els:[],animate:function(){var b=Animator.animations.iceteroidParallax;for(i in b.$els)Animator.CSSTransform(b.$els[i],(1400-PositionUpdater.bird.position.x)/6,(3200-PositionUpdater.bird.position.y)/6,0);return!0},init:function(){Animator.animations.iceteroidParallax.$els=[$("div#iceteroid-1")];Animator.phases[3].animations.push(Animator.animations.iceteroidParallax.animate)}};
Animator.animations.asteroids={positions:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],origo:{x:100,y:400},wsiOrigo:{x:180,y:-100},rads:[0,1,2,3,2],$els:null,spaceSheep:null,diameters:[400,450,500,540,200],circulationSpeeds:[9.0E-5,-3.3E-5,-9.0E-5,4.0E-5,3.0E-4],innerCirculationSpeeds:[-9.0E-5,8.3E-5,9.0E-5,-4.0E-5,4.0E-4],innerRads:[1,0,2,0,0.4],init:function(){Animator.animations.asteroids.$els=[$("div#asteroid-1"),$("div#asteroid-2"),$("div#asteroid-3"),$("div#asteroid-4")];Animator.phases[3].animations.push(Animator.animations.asteroids.animate);
Animator.animations.asteroids.spaceSheep=$("div#space-sheep")},animate:function(b){var a=Animator.animations.asteroids;for(i in a.$els)a.rads[i]+=b*a.circulationSpeeds[i],a.innerRads[i]+=b*a.innerCirculationSpeeds[i],a.positions[i].x=a.origo.x+a.diameters[i]*Math.cos(a.rads[i]),a.positions[i].y=a.origo.y+a.diameters[i]*Math.sin(a.rads[i]),Animator.CSSTransform(a.$els[i],a.positions[i].x,a.positions[i].y,a.innerRads[i]);a.rads[4]+=b*a.circulationSpeeds[4];a.innerRads[4]+=b*a.innerCirculationSpeeds[4];
a.positions[4].x=a.wsiOrigo.x+a.diameters[4]*Math.cos(a.rads[4]);a.positions[4].y=a.wsiOrigo.y+a.diameters[4]*Math.sin(a.rads[4]);Animator.CSSTransform(a.spaceSheep,a.positions[4].x,a.positions[4].y,a.innerRads[4]);return!0}};
Animator.animations.birdTransforms={$el:null,activePos:0,init:function(){Animator.animations.birdTransforms.$el=$("div#hero-bird");Animator.phases[1].animations.push(Animator.animations.birdTransforms.animate);Animator.phases[2].animations.push(Animator.animations.birdTransforms.animate);Animator.phases[3].animations.push(Animator.animations.birdTransforms.animate)},animate:function(){var b=PositionUpdater.currentPosition;if(b<6.05&&Animator.animations.birdTransforms.activePos!==0)Animator.animations.birdTransforms.$el.removeClass(),
Animator.animations.birdTransforms.activePos=0;else if(b>6.05&&b<9.7&&Animator.animations.birdTransforms.activePos!==1)Animator.animations.birdTransforms.$el.removeClass(),Animator.animations.birdTransforms.$el.addClass("lazer"),Animator.animations.birdTransforms.activePos=1;else if(b>9.7&&Animator.animations.birdTransforms.activePos!==2)Animator.animations.birdTransforms.$el.removeClass(),Animator.animations.birdTransforms.$el.addClass("ice"),Animator.animations.birdTransforms.activePos=2;return!0}};
Animator.animations.mustachePig={position:{x:0,y:0},speed:{x:0.15,y:0.2},rad:2.6,$el:null,circulationSpeed:0.0010,innerRad:0,init:function(){Animator.animations.mustachePig.$el=$("div#mustache-pig");Animator.animations.mustachePig.speed.x=-200/4400;Animator.animations.mustachePig.speed.y=600/4400},explode:function(){var b=Animator.animations.mustachePig;b.$el.addClass("hit");Animator.phases[2].animations.push(function(a){b.position.x+=b.speed.x*a;b.position.y+=b.speed.y*a;b.innerRad+=a*b.circulationSpeed;
Animator.CSSTransform(b.$el,b.position.x,b.position.y,b.innerRad);b.speed.x<-0.04&&(b.speed.x+=2.0E-5*a,b.speed.y-=2.0E-5*a,b.circulationSpeed-=1.0E-7*a);if(b.position.y>520)return!1;else b.position.y>130&&b.$el.addClass("frozen");return!0})}};Animator.animations.footerFreeze={$el:null,startTime:0,init:function(){Animator.animations.footerFreeze.$el=$("div#footer-frame")},explode:function(){Animator.animations.footerFreeze.$el.addClass("hit").addClass("frozen")}};
var PositionUpdater={view:{path:[{x:959,y:75,p:!0},{x:959,y:75},{x:959,y:75},{x:956,y:742,p:!0},{x:956,y:742},{x:956,y:742},{x:956,y:1353,p:!0},{x:956,y:1353},{x:956,y:1353},{x:1488,y:1788,p:!0},{x:954,y:1724},{x:1488,y:1788},{x:1801,y:1858,p:!0},{x:1689,y:1818},{x:1963,y:1924},{x:2465,y:1986,p:!0},{x:2248,y:2047},{x:2655,y:1937},{x:2424,y:2526,p:!0},{x:3054,y:2076},{x:2355,y:2571},{x:1807,y:2917,p:!0},{x:1807,y:2917},{x:1807,y:2917},{x:1647,y:3484,p:!0},{x:1300,y:3152},{x:1721,y:3555},{x:1752,y:3650,
p:!0},{x:1752,y:3572},{x:1750,y:3729},{x:1828,y:4305,p:!0},{x:1816,y:4092},{x:1843,y:4515},{x:1005,y:4645,p:!0},{x:1836,y:4613},{x:1004,y:4644},{x:958,y:4933,p:!0},{x:805,y:4654},{x:1047,y:5098},{x:1013,y:6071,p:!0},{x:1013,y:6071},{x:1013,y:6071}],position:{x:0,y:0}},bird:{path:[{x:959,y:45,p:!0},{x:959,y:45},{x:959,y:45},{x:956,y:742,p:!0},{x:956,y:742},{x:956,y:742},{x:956,y:1353,p:!0},{x:956,y:1353},{x:956,y:1353},{x:1502,y:1556,p:!0},{x:939,y:1707},{x:1995,y:1421},{x:2118,y:1669,p:!0},{x:2098,
y:1632},{x:2162,y:1728},{x:2465,y:1986,p:!0},{x:2248,y:2047},{x:2655,y:1937},{x:2424,y:2526,p:!0},{x:3054,y:2076},{x:2355,y:2571},{x:1807,y:2917,p:!0},{x:1807,y:2917},{x:1807,y:2917},{x:1647,y:3484,p:!0},{x:1300,y:3152},{x:1721,y:3555},{x:1752,y:3650,p:!0},{x:1752,y:3572},{x:1750,y:3729},{x:1828,y:4305,p:!0},{x:1816,y:4092},{x:1843,y:4515},{x:1005,y:4645,p:!0},{x:1836,y:4613},{x:1004,y:4644},{x:958,y:4933,p:!0},{x:805,y:4654},{x:1047,y:5098},{x:1013,y:5991,p:!0},{x:1013,y:5791},{x:1013,y:5791}],position:{x:0,
y:0},offset:{x:0,y:0}},speed:0.04,targetPosition:0,targetPercentage:0,currentPosition:0,translateOffset:{x:0,y:0},oddFrame:!0,$scroll:null,scrollHeight:0,maxPos:null,windowSize:{x:0,y:0},getPosition:function(){return PositionUpdater.currentPosition},setTarget:function(a){a>PositionUpdater.maxPos?a=PositionUpdater.maxPos:a<0&&(a=0);PositionUpdater.targetPosition=a},getMaximumPosition:function(){return PositionUpdater.view.path.length/3},update:function(a,b,c){Animator.update(PositionUpdater.currentPosition,
a,b);if(Math.abs(PositionUpdater.currentPosition-PositionUpdater.targetPosition)>PositionUpdater.speed)a=Math.abs(PositionUpdater.currentPosition-PositionUpdater.targetPosition),a*=PositionUpdater.speed,PositionUpdater.currentPosition<PositionUpdater.targetPosition?PositionUpdater.currentPosition+=a:PositionUpdater.currentPosition>PositionUpdater.targetPosition&&(PositionUpdater.currentPosition-=a);else if(!c)return;PositionUpdater.$scroll.height(PositionUpdater.currentPosition/PositionUpdater.maxPos*
PositionUpdater.scrollHeight);var b=Math.floor(PositionUpdater.currentPosition),c=PositionUpdater.currentPosition-b,e=PositionUpdater.bird.position.x,d=PositionUpdater.bird.position.y,a=null;if(PositionUpdater.view.path[b*3]&&PositionUpdater.view.path[(b+1)*3])a=jsBezier.pointOnCurve([PositionUpdater.view.path[b*3],PositionUpdater.view.path[b*3+2],PositionUpdater.view.path[(b+1)*3+1],PositionUpdater.view.path[(b+1)*3]],1-c),PositionUpdater.bird.position=jsBezier.pointOnCurve([PositionUpdater.bird.path[b*
3],PositionUpdater.bird.path[b*3+2],PositionUpdater.bird.path[(b+1)*3+1],PositionUpdater.bird.path[(b+1)*3]],1-c);a!==null&&(c=parseInt(Math.atan2(d-PositionUpdater.bird.position.y,e-PositionUpdater.bird.position.x)/Math.PI*180),c+=90,e=PositionUpdater.windowSize.x/2,d=PositionUpdater.windowSize.y/2,b=e-a.x,a=d-a.y,Modernizr.csstransforms3d?(c="translate3d("+(PositionUpdater.bird.position.x-PositionUpdater.translateOffset.x+e+160)+"px,"+(PositionUpdater.bird.position.y-PositionUpdater.translateOffset.y+
d)+"px, 0) rotate("+c+"deg) scale(1)",e="translate3d("+(b-180)+"px,"+a+"px, 0) scale(1)",d="translate3d(0,"+a+"px, 0) scale(1)"):(c="translate("+(PositionUpdater.bird.position.x-PositionUpdater.translateOffset.x+e+160)+"px,"+(PositionUpdater.bird.position.y-PositionUpdater.translateOffset.y+d)+"px) rotate("+c+"deg) scale(1)",e="translate("+(b-180)+"px,"+a+"px) scale(1)",d="translate(0,"+a+"px) scale(1)"),PositionUpdater.bird.element.css({"-webkit-transform":c,"-moz-transform":c,"-ms-transform":c,
"-o-transform":c,transform:c,zoom:1}),$.browser.mozilla?PositionUpdater.view.element.css({top:a-8400,left:b-180}):PositionUpdater.view.element.css({"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,"-o-transform":e,transform:e,zoom:1}),PositionUpdater.starElement.css({"-webkit-transform":d,"-moz-transform":d,"-ms-transform":d,"-o-transform":d,transform:d,zoom:1}))},start:function(){Animator.start();PositionUpdater.view.element=$("#main");PositionUpdater.starElement=$("#stars");PositionUpdater.bird.element=
$("#hero-bird");PositionUpdater.bird.offset.x=PositionUpdater.bird.element.width()/2;PositionUpdater.bird.offset.y=PositionUpdater.bird.element.height()/2;PositionUpdater.translateOffset.x=$(window).width()/2;PositionUpdater.translateOffset.y=$(window).height()/2;PositionUpdater.windowSize.x=$(window).width();PositionUpdater.windowSize.y=$(window).height();PositionUpdater.maxPos=PositionUpdater.getMaximumPosition();PositionUpdater.$scroll=$("div#scroll-inner");PositionUpdater.scrollHeight=PositionUpdater.$scroll.parent().height();
(function(a,b){var c=a.requestAnimFrame;a._animLoop=function(a,d){function g(f){if(h!==!1){c(g,d);var f=f&&f>1E4?f:+new b,j=f-i;j<260&&(h=a(j,f));i=f}}var h,i=+new b;g()}})(window,Date);window._animLoop(PositionUpdater.update);PositionUpdater.setTarget(0.06);log("Haz 3d transforms? "+Modernizr.csstransforms3d);log("Matlock initialization complete. Cue theme song.")}};
window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,40)}}();
var comics={open:function(){removeAllPlayingFrames();$("#lightbox").fadeIn();comics.onResize();var a=$("#lightbox iframe");a.attr("src")==""&&(a.hasClass("chinese-iframe")?a.attr("src","../comic-frame.html"):a.attr("src","comic-frame.html"));comics.isOpen=!0},onResize:function(){var a=$(window).height();$("#lightbox").height(a);$("#lightbox div").height(a);$("#lightbox div iframe").height(a)},close:function(){$("#lightbox").fadeOut();comics.isOpen=!1},isOpen:!1};
var POINTS=[],STARTTOUCH={x:0,y:0,t:0},STARTDRAG={x:0,y:null,t:0},DRAWMODE=!1,INSTRUCTIONSHIDDEN=!1,ADAPTIVE_SCROLLING_MAX=0,ADAPTIVE_SCROLLING_AVERAGE=0,ADAPTIVE_SCROLLING_COUNTER=0,ADAPTIVE_SCROLLING_AMOUNT=0,ADAPTIVE_SCROLLING_SPEED=0.03;
$(function(){$(window).bind("resize",windowResizedListener);$("div#scrollhide").mousewheel(mouseWheelListener);$(window).bind("touchstart",function(a){a=a.originalEvent.touches.item(0);STARTTOUCH.x=a.pageX;STARTTOUCH.y=a.pageY;STARTTOUCH.t=(new Date).getTime()});$(window).bind("touchend",function(a){a.preventDefault()});$(window).bind("touchmove",function(a){a.preventDefault();var a=a.originalEvent.touches.item(0).pageY,b=(new Date).getTime()-STARTTOUCH.t,a=parseFloat(STARTTOUCH.y-a)/(1*b),a=PositionUpdater.currentPosition+
a;a>0&&a<PositionUpdater.maxPos&&(INSTRUCTIONSHIDDEN||($("div#instructions").addClass("hidden-instructions"),INSTRUCTIONSHIDDEN=!0),PositionUpdater.setTarget(a))});$("div#main").bind("mousedown",function(a){STARTDRAG.y=a.clientY;a.preventDefault()});$("div#main").bind("mouseup",function(a){STARTDRAG.y=null;a.preventDefault()});$("div#main").bind("mousemove",function(a){a.preventDefault();STARTDRAG.y!==null&&(a.preventDefault(),a=parseFloat(STARTDRAG.y-a.clientY)/120,a=PositionUpdater.currentPosition+
a,a>0&&a<PositionUpdater.maxPos&&(INSTRUCTIONSHIDDEN||($("div#instructions").addClass("hidden-instructions"),INSTRUCTIONSHIDDEN=!0),PositionUpdater.setTarget(a)))});var b=function(a){a.preventDefault();a=$(this).data("path-index");INSTRUCTIONSHIDDEN||($("div#instructions").addClass("hidden-instructions"),INSTRUCTIONSHIDDEN=!0);PositionUpdater.setTarget(a)},d=function(a){a.preventDefault();comics.open();return!1};$("nav a").click(b).bind("touchstart",b);$("div#planet-4").click(d).bind("touchstart",
d);$("div#scrollbar").click(function(a){a=a.clientY/$(window).height()*PositionUpdater.getMaximumPosition();INSTRUCTIONSHIDDEN||($("div#instructions").addClass("hidden-instructions"),INSTRUCTIONSHIDDEN=!0);PositionUpdater.setTarget(a)});$(window).keydown(function(a){!a.ctrlKey&&!a.shiftKey&&!a.altKey&&!a.metaKey&&(a.keyCode==38?comics.isOpen||updatePosition(-0.018):a.keyCode==40?comics.isOpen||updatePosition(0.018):a.keyCode==27&&comics.isOpen&&comics.close())});DRAWMODE||(PositionUpdater.start(),
$(window).resize());$.preloadCssImages();setTimeout(function(){$("div#instructions").removeClass("hidden-instructions")},400)});function updatePosition(b){b=PositionUpdater.currentPosition+b*40;INSTRUCTIONSHIDDEN||($("div#instructions").addClass("hidden-instructions"),INSTRUCTIONSHIDDEN=!0);PositionUpdater.setTarget(b)}
function mouseWheelListener(b,d,a,c){b.preventDefault();comics.isOpen||(b=Math.abs(c),ADAPTIVE_SCROLLING_COUNTER++,ADAPTIVE_SCROLLING_AMOUNT+=b,ADAPTIVE_SCROLLING_AVERAGE=ADAPTIVE_SCROLLING_AMOUNT/ADAPTIVE_SCROLLING_COUNTER,c=c/ADAPTIVE_SCROLLING_AVERAGE*ADAPTIVE_SCROLLING_SPEED,Math.abs(c)>0.3?c=c>0?Math.min(c,0.0050):Math.max(c,-0.0050):Math.abs(c)<0.03&&(c=c>0?Math.max(c,0.03):Math.min(c,-0.03)),c*=-1,updatePosition(c))}
function canvasClicked(b){var d=$(document).scrollLeft()+b.clientX-$("canvas#draw-canvas").position().left,b=$("div#scrollhide").scrollTop()+$(document).scrollTop()+b.clientY-$("canvas#draw-canvas").position().top;d&&b&&(POINTS.push({x:d,y:b}),log("click at "+d+","+b+" ("+$(document).scrollLeft()+","+($("div#scrollhide").scrollTop()+$(document).scrollTop())+")"),DRAWMODE&&drawPoints(POINTS,[255,255,120],10))}
function drawPoints(b,d,a){rr.setColor(d[0],d[1],d[2]);a||(a=10);for(i in b){var c=b[i],e=a;i%3==0?(c.p=!0,rr.setColor(d[0],d[1],d[2])):(i%2==0?rr.setColor(0,255,255,255):rr.setColor(0,255,0,255),e=a/2);rr.circle(c.x,c.y,e);prev=c}}function goDrawMode(){$("div#scrollhide").css("overflow","scroll").width(6E3).height(6E3);$(window).unbind("mousewheel");DRAWMODE=!0;rr.init("draw-canvas");drawPoints(POINTS,[255,255,0]);Animator.animations.sliderControl.init();$("#draw-canvas").click(canvasClicked)}
function windowResizedListener(){var b=$(window).width(),d=$(window).height();PositionUpdater.translateOffset.x=$(window).width()/2;PositionUpdater.translateOffset.y=$(window).height()/2;PositionUpdater.windowSize.x=b;PositionUpdater.windowSize.y=d;PositionUpdater.scrollHeight=d;DRAWMODE&&drawPoints(POINTS,[255,255,120],10);$("div#clouds, div#clouds-back").width(b*2).css("left",-b/2);$("div#clouds-2, div#clouds-2-back").width(b*4).css("left",-b/2);$("div#clouds-3, div#clouds-3-back").width(b*3).css("left",
-b*1.5);$("div#scrollhide").height(d);comics.onResize();PositionUpdater.update(0,(new Date).getTime(),!0)};
window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){var b=arguments;b.callee=b.callee.caller;b=[].slice.call(b);typeof console.log==="object"?log.apply.call(console.log,console,b):console.log.apply(console,b)}};
(function(b){function a(){}for(var n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),q;q=n.pop();)b[q]=b[q]||a})(function(){try{return console.log(),window.console}catch(b){return window.console={}}}());
(function(b){b.flexslider=function(a,n){a.init=function(){a.vars=b.extend({},b.flexslider.defaults,n);a.data("flexslider",!0);a.container=b(".slides",a).first();a.slides=b(".slides:first > li",a);a.count=a.slides.length;a.animating=!1;a.currentSlide=a.vars.slideToStart;a.animatingTo=a.currentSlide;a.atEnd=a.currentSlide==0?!0:!1;a.eventType="ontouchstart"in document.documentElement?"touchstart":"click";a.cloneCount=0;a.cloneOffset=0;a.manualPause=!1;a.vertical=a.vars.slideDirection=="vertical";a.prop=
a.vertical?"top":"marginLeft";a.args={};a.transitions="webkitTransition"in document.body.style;if(a.transitions)a.prop="-webkit-transform";if(a.vars.controlsContainer!="")a.controlsContainer=b(a.vars.controlsContainer).eq(b(".slides").index(a.container)),a.containerExists=a.controlsContainer.length>0;if(a.vars.manualControls!="")a.manualControls=b(a.vars.manualControls,a.containerExists?a.controlsContainer:a),a.manualExists=a.manualControls.length>0;a.vars.randomize&&(a.slides.sort(function(){return Math.round(Math.random())-
0.5}),a.container.empty().append(a.slides));if(a.vars.animation.toLowerCase()=="slide"){a.transitions&&a.setTransition(0);a.css({overflow:"hidden"});if(a.vars.animationLoop)a.cloneCount=2,a.cloneOffset=1,a.container.append(a.slides.filter(":first").clone().addClass("clone")).prepend(a.slides.filter(":last").clone().addClass("clone"));a.newSlides=b(".slides:first > li",a);var q=-1*(a.currentSlide+a.cloneOffset);a.vertical?(a.newSlides.css({display:"block",width:"100%","float":"left"}),a.container.height((a.count+
a.cloneCount)*200+"%").css("position","absolute").width("100%"),setTimeout(function(){a.css({position:"relative"}).height(a.slides.filter(":first").height());a.args[a.prop]=a.transitions?"translate3d(0,"+q*a.height()+"px,0)":q*a.height()+"px";a.container.css(a.args)},100)):(a.args[a.prop]=a.transitions?"translate3d("+q*a.width()+"px,0,0)":q*a.width()+"px",a.container.width((a.count+a.cloneCount)*200+"%").css(a.args),setTimeout(function(){a.newSlides.width(a.width()).css({"float":"left",display:"block"})},
100))}else a.transitions=!1,a.slides.css({width:"100%","float":"left",marginRight:"-100%"}).eq(a.currentSlide).fadeIn(a.vars.animationDuration);if(a.vars.controlNav){if(a.manualExists)a.controlNav=a.manualControls;else{for(var m=b('<ol class="flex-control-nav"></ol>'),c=1,s=0;s<a.count;s++)m.append("<li><a>"+c+"</a></li>"),c++;a.containerExists?(b(a.controlsContainer).append(m),a.controlNav=b(".flex-control-nav li a",a.controlsContainer)):(a.append(m),a.controlNav=b(".flex-control-nav li a",a))}a.controlNav.eq(a.currentSlide).addClass("active");
a.controlNav.bind(a.eventType,function(o){o.preventDefault();if(!b(this).hasClass("active"))a.controlNav.index(b(this))>a.currentSlide?a.direction="next":a.direction="prev",a.flexAnimate(a.controlNav.index(b(this)),a.vars.pauseOnAction)})}if(a.vars.directionNav)m=b('<ul class="flex-direction-nav"><li><a class="prev" href="#">'+a.vars.prevText+'</a></li><li><a class="next" href="#">'+a.vars.nextText+"</a></li></ul>"),a.containerExists?(b(a.controlsContainer).append(m),a.directionNav=b(".flex-direction-nav li a",
a.controlsContainer)):(a.append(m),a.directionNav=b(".flex-direction-nav li a",a)),a.vars.animationLoop||(a.currentSlide==0?a.directionNav.filter(".prev").addClass("disabled"):a.currentSlide==a.count-1&&a.directionNav.filter(".next").addClass("disabled")),a.directionNav.bind(a.eventType,function(o){o.preventDefault();o=b(this).hasClass("next")?a.getTarget("next"):a.getTarget("prev");a.canAdvance(o)&&a.flexAnimate(o,a.vars.pauseOnAction)});a.vars.keyboardNav&&b("ul.slides").length==1&&b(document).bind("keyup",
function(o){if(!a.animating&&!(o.keyCode!=39&&o.keyCode!=37)){if(o.keyCode==39)var f=a.getTarget("next");else o.keyCode==37&&(f=a.getTarget("prev"));a.canAdvance(f)&&a.flexAnimate(f,a.vars.pauseOnAction)}});if(a.vars.mousewheel)a.mousewheelEvent=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",a.bind(a.mousewheelEvent,function(o){o.preventDefault();o=o?o:window.event;o=(o.detail?o.detail*-1:o.wheelDelta/40)<0?a.getTarget("next"):a.getTarget("prev");a.canAdvance(o)&&a.flexAnimate(o,
a.vars.pauseOnAction)});if(a.vars.slideshow)a.vars.pauseOnHover&&a.vars.slideshow&&a.hover(function(){a.pause()},function(){a.manualPause||a.resume()}),a.animatedSlides=setInterval(a.animateSlides,a.vars.slideshowSpeed);if(a.vars.pausePlay)m=b('<div class="flex-pauseplay"><span></span></div>'),a.containerExists?(a.controlsContainer.append(m),a.pausePlay=b(".flex-pauseplay span",a.controlsContainer)):(a.append(m),a.pausePlay=b(".flex-pauseplay span",a)),m=a.vars.slideshow?"pause":"play",a.pausePlay.addClass(m).text(m==
"pause"?a.vars.pauseText:a.vars.playText),a.pausePlay.bind(a.eventType,function(o){o.preventDefault();b(this).hasClass("pause")?(a.pause(),a.manualPause=!0):(a.resume(),a.manualPause=!1)});if("ontouchstart"in document.documentElement){var k,l,p,o,f,u,e=!1;a.each(function(){"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",i,!1)});var i=function(f){a.animating?f.preventDefault():f.touches.length==1&&(a.pause(),o=a.vertical?a.height():a.width(),u=Number(new Date),p=a.vertical?
(a.currentSlide+a.cloneOffset)*a.height():(a.currentSlide+a.cloneOffset)*a.width(),k=a.vertical?f.touches[0].pageY:f.touches[0].pageX,l=a.vertical?f.touches[0].pageX:f.touches[0].pageY,a.setTransition(0),this.addEventListener("touchmove",g,!1),this.addEventListener("touchend",d,!1))},g=function(b){f=a.vertical?k-b.touches[0].pageY:k-b.touches[0].pageX;e=a.vertical?Math.abs(f)<Math.abs(b.touches[0].pageX-l):Math.abs(f)<Math.abs(b.touches[0].pageY-l);e||(b.preventDefault(),a.vars.animation=="slide"&&
a.transitions&&(a.vars.animationLoop||(f/=a.currentSlide==0&&f<0||a.currentSlide==a.count-1&&f>0?Math.abs(f)/o+2:1),a.args[a.prop]=a.vertical?"translate3d(0,"+(-p-f)+"px,0)":"translate3d("+(-p-f)+"px,0,0)",a.container.css(a.args)))},d=function(){a.animating=!1;if(a.animatingTo==a.currentSlide&&!e&&f!=null){var b=f>0?a.getTarget("next"):a.getTarget("prev");a.canAdvance(b)&&Number(new Date)-u<550&&Math.abs(f)>20||Math.abs(f)>o/2?a.flexAnimate(b,a.vars.pauseOnAction):a.flexAnimate(a.currentSlide,a.vars.pauseOnAction)}this.removeEventListener("touchmove",
g,!1);this.removeEventListener("touchend",d,!1);p=f=l=k=null}}a.vars.animation.toLowerCase()=="slide"&&b(window).resize(function(){a.animating||(a.vertical?(a.height(a.slides.filter(":first").height()),a.args[a.prop]=-1*(a.currentSlide+a.cloneOffset)*a.slides.filter(":first").height()+"px"):(a.newSlides.width(a.width()),a.args[a.prop]=-1*(a.currentSlide+a.cloneOffset)*a.width()+"px"),a.transitions&&(a.setTransition(0),a.args[a.prop]=a.vertical?"translate3d(0,"+a.args[a.prop]+",0)":"translate3d("+
a.args[a.prop]+",0,0)"),a.container.css(a.args))});a.vars.start(a)};a.flexAnimate=function(b,m){if(!a.animating)if(a.animating=!0,a.animatingTo=b,a.vars.before(a),m&&a.pause(),a.vars.controlNav&&a.controlNav.removeClass("active").eq(b).addClass("active"),a.atEnd=b==0||b==a.count-1?!0:!1,!a.vars.animationLoop&&a.vars.directionNav&&(b==0?a.directionNav.removeClass("disabled").filter(".prev").addClass("disabled"):b==a.count-1?a.directionNav.removeClass("disabled").filter(".next").addClass("disabled"):
a.directionNav.removeClass("disabled")),!a.vars.animationLoop&&b==a.count-1&&(a.pause(),a.vars.end(a)),a.vars.animation.toLowerCase()=="slide"){var c=a.vertical?a.slides.filter(":first").height():a.slides.filter(":first").width();a.slideString=a.currentSlide==0&&b==a.count-1&&a.vars.animationLoop&&a.direction!="next"?"0px":a.currentSlide==a.count-1&&b==0&&a.vars.animationLoop&&a.direction!="prev"?-1*(a.count+1)*c+"px":-1*(b+a.cloneOffset)*c+"px";a.args[a.prop]=a.slideString;a.transitions?(a.setTransition(a.vars.animationDuration),
a.args[a.prop]=a.vertical?"translate3d(0,"+a.slideString+",0)":"translate3d("+a.slideString+",0,0)",a.container.css(a.args).one("webkitTransitionEnd transitionend",function(){a.wrapup(c)})):a.container.animate(a.args,a.vars.animationDuration,function(){a.wrapup(c)})}else a.slides.eq(a.currentSlide).fadeOut(a.vars.animationDuration),a.slides.eq(b).fadeIn(a.vars.animationDuration,function(){a.wrapup()})};a.wrapup=function(b){a.vars.animation=="slide"&&(a.currentSlide==0&&a.animatingTo==a.count-1&&a.vars.animationLoop?
(a.args[a.prop]=-1*a.count*b+"px",a.transitions&&(a.setTransition(0),a.args[a.prop]=a.vertical?"translate3d(0,"+a.args[a.prop]+",0)":"translate3d("+a.args[a.prop]+",0,0)"),a.container.css(a.args)):a.currentSlide==a.count-1&&a.animatingTo==0&&a.vars.animationLoop&&(a.args[a.prop]=-1*b+"px",a.transitions&&(a.setTransition(0),a.args[a.prop]=a.vertical?"translate3d(0,"+a.args[a.prop]+",0)":"translate3d("+a.args[a.prop]+",0,0)"),a.container.css(a.args)));a.animating=!1;a.currentSlide=a.animatingTo;a.vars.after(a)};
a.animateSlides=function(){a.animating||a.flexAnimate(a.getTarget("next"))};a.pause=function(){clearInterval(a.animatedSlides);a.vars.pausePlay&&a.pausePlay.removeClass("pause").addClass("play").text(a.vars.playText)};a.resume=function(){a.animatedSlides=setInterval(a.animateSlides,a.vars.slideshowSpeed);a.vars.pausePlay&&a.pausePlay.removeClass("play").addClass("pause").text(a.vars.pauseText)};a.canAdvance=function(b){return!a.vars.animationLoop&&a.atEnd?a.currentSlide==0&&b==a.count-1&&a.direction!=
"next"?!1:a.currentSlide==a.count-1&&b==0&&a.direction=="next"?!1:!0:!0};a.getTarget=function(b){a.direction=b;return b=="next"?a.currentSlide==a.count-1?0:a.currentSlide+1:a.currentSlide==0?a.count-1:a.currentSlide-1};a.setTransition=function(b){a.container.css({"-webkit-transition-duration":b/1E3+"s"})};a.init()};b.flexslider.defaults={animation:"fade",slideDirection:"horizontal",slideshow:!0,slideshowSpeed:7E3,animationDuration:600,directionNav:!0,controlNav:!0,keyboardNav:!0,mousewheel:!1,prevText:"Previous",
nextText:"Next",pausePlay:!1,pauseText:"Pause",playText:"Play",randomize:!1,slideToStart:0,animationLoop:!0,pauseOnAction:!0,pauseOnHover:!1,controlsContainer:"",manualControls:"",start:function(){},before:function(){},after:function(){},end:function(){}};b.fn.flexslider=function(a){return this.each(function(){b(this).find(".slides li").length==1?b(this).find(".slides li").fadeIn(400):b(this).data("flexslider")!=!0&&new b.flexslider(b(this),a)})}})(jQuery);
(function(b){function a(a){var c=a||window.event,q=[].slice.call(arguments,1),k=0,l=0,p=0,a=b.event.fix(c);a.type="mousewheel";c.wheelDelta&&(k=c.wheelDelta/120);c.detail&&(k=-c.detail/3);p=k;c.axis!==void 0&&c.axis===c.HORIZONTAL_AXIS&&(p=0,l=-1*k);c.wheelDeltaY!==void 0&&(p=c.wheelDeltaY/120);c.wheelDeltaX!==void 0&&(l=-1*c.wheelDeltaX/120);q.unshift(a,k,l,p);return(b.event.dispatch||b.event.handle).apply(this,q)}var n=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var q=n.length;q;)b.event.fixHooks[n[--q]]=
b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=n.length;b;)this.addEventListener(n[--b],a,!1);else this.onmousewheel=a},teardown:function(){if(this.removeEventListener)for(var b=n.length;b;)this.removeEventListener(n[--b],a,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
(function(){if("undefined"==typeof Math.sgn)Math.sgn=function(a){return 0==a?0:0<a?1:-1};var b={subtract:function(a,b){return{x:a.x-b.x,y:a.y-b.y}},dotProduct:function(a,b){return a.x*b.x+a.y*b.y},square:function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},scale:function(a,b){return{x:a.x*b,y:a.y*b}}},a=Math.pow(2,-65),n=function(a,f){for(var u=[],e=f.length-1,i=2*e-1,g=[],d=[],c=[],l=[],t=[[1,0.6,0.3,0.1],[0.4,0.6,0.6,0.4],[0.1,0.3,0.6,1]],h=0;h<=e;h++)g[h]=b.subtract(f[h],a);for(h=0;h<=e-1;h++)d[h]=b.subtract(f[h+
1],f[h]),d[h]=b.scale(d[h],3);for(h=0;h<=e-1;h++)for(var k=0;k<=e;k++)c[h]||(c[h]=[]),c[h][k]=b.dotProduct(d[h],g[k]);for(h=0;h<=i;h++)l[h]||(l[h]=[]),l[h].y=0,l[h].x=parseFloat(h)/i;i=e-1;for(g=0;g<=e+i;g++){h=Math.max(0,g-i);for(d=Math.min(g,e);h<=d;h++)j=g-h,l[h+j].y+=c[j][h]*t[j][h]}e=f.length-1;l=q(l,2*e-1,u,0);i=b.subtract(a,f[0]);c=b.square(i);for(h=t=0;h<l;h++)i=b.subtract(a,m(f,e,u[h],null,null)),i=b.square(i),i<c&&(c=i,t=u[h]);i=b.subtract(a,f[e]);i=b.square(i);i<c&&(c=i,t=1);return{location:t,
distance:c}},q=function(b,f,c,e){var i=[],g=[],d=[],l=[],k=0,t,h;h=Math.sgn(b[0].y);for(var p=1;p<=f;p++)t=Math.sgn(b[p].y),t!=h&&k++,h=t;switch(k){case 0:return 0;case 1:if(64<=e)return c[0]=(b[0].x+b[f].x)/2,1;var n,k=b[0].y-b[f].y;t=b[f].x-b[0].x;h=b[0].x*b[f].y-b[f].x*b[0].y;p=max_distance_below=0;for(n=1;n<f;n++){var s=k*b[n].x+t*b[n].y+h;s>p?p=s:s<max_distance_below&&(max_distance_below=s)}n=t;p=(1*(h-p)-0*n)*(1/(0*n-1*k));n=t;k=(1*(h-max_distance_below)-0*n)*(1/(0*n-1*k));t=Math.min(p,k);if(Math.max(p,
k)-t<a)return d=b[f].x-b[0].x,l=b[f].y-b[0].y,c[0]=0+1*(d*(b[0].y-0)-l*(b[0].x-0))*(1/(0*d-1*l)),1}m(b,f,0.5,i,g);b=q(i,f,d,e+1);f=q(g,f,l,e+1);for(e=0;e<b;e++)c[e]=d[e];for(e=0;e<f;e++)c[e+b]=l[e];return b+f},m=function(a,b,c,e,i){for(var g=[[]],d=0;d<=b;d++)g[0][d]=a[d];for(a=1;a<=b;a++)for(d=0;d<=b-a;d++)g[a]||(g[a]=[]),g[a][d]||(g[a][d]={}),g[a][d].x=(1-c)*g[a-1][d].x+c*g[a-1][d+1].x,g[a][d].y=(1-c)*g[a-1][d].y+c*g[a-1][d+1].y;if(null!=e)for(d=0;d<=b;d++)e[d]=g[d][0];if(null!=i)for(d=0;d<=b;d++)i[d]=
g[b-d][d];return g[b][0]},c={},s=function(a){var b=c[a];if(!b){var b=[],l=function(a){return function(){return a}},e=function(){return function(a){return a}},i=function(){return function(a){return 1-a}},g=function(a){return function(b){for(var f=1,d=0;d<a.length;d++)f*=a[d](b);return f}};b.push(new function(){return function(b){return Math.pow(b,a)}});for(var d=1;d<a;d++){for(var k=[new l(a)],m=0;m<a-d;m++)k.push(new e);for(m=0;m<d;m++)k.push(new i);b.push(new g(k))}b.push(new function(){return function(b){return Math.pow(1-
b,a)}});c[a]=b}return b},k=function(a,b){for(var c=s(a.length-1),e=0,l=0,g=0;g<a.length;g++)e+=a[g].x*c[g](b),l+=a[g].y*c[g](b);return{x:e,y:l}},l=function(a,b,c){for(var e=k(a,b),l=0,g=0<c?1:-1,d=null;l<Math.abs(c);)b+=0.0050*g,d=k(a,b),l+=Math.sqrt(Math.pow(d.x-e.x,2)+Math.pow(d.y-e.y,2)),e=d;return{point:d,location:b}},p=function(a,b){var c=k(a,b),e=k(a.slice(0,a.length-1),b),l=e.y-c.y,c=e.x-c.x;return 0==l?Infinity:Math.atan(l/c)};window.jsBezier={distanceFromCurve:n,gradientAtPoint:p,gradientAtPointAlongCurveFrom:function(a,
b,c){b=l(a,b,c);if(1<b.location)b.location=1;if(0>b.location)b.location=0;return p(a,b.location)},nearestPointOnCurve:function(a,b){var c=n(a,b);return{point:m(b,b.length-1,c.location,null,null),location:c.location}},pointOnCurve:k,pointAlongCurveFrom:function(a,b,c){return l(a,b,c).point},perpendicularToCurveAt:function(a,b,c,e){b=l(a,b,null==e?0:e);a=p(a,b.location);e=Math.atan(-1/a);a=c/2*Math.sin(e);c=c/2*Math.cos(e);return[{x:b.point.x+c,y:b.point.y+a},{x:b.point.x-c,y:b.point.y-a}]}}})();
jQuery.preloadCssImages=function(b){function a(){clearTimeout(k);if(c&&c.length&&c[m]){m++;if(b.statusTextEl){var a=c[m]?"Now Loading: <span>"+c[m].split("/")[c[m].split("/").length-1]:"Loading complete";jQuery(b.statusTextEl).html('<span class="numLoaded">'+m+'</span> of <span class="numTotal">'+c.length+'</span> loaded (<span class="percentLoaded">'+(m/c.length*100).toFixed(0)+'%</span>) <span class="currentImg">'+a+"</span></span>")}b.statusBarEl&&(a=jQuery(b.statusBarEl).width(),jQuery(b.statusBarEl).css("background-position",
-(a-(a*m/c.length).toFixed(0))+"px 50%"));n()}}function n(){if(c&&c.length&&c[m]){var l=new Image;l.src=c[m];l.complete?a():jQuery(l).bind("error load onreadystatechange",a);k=setTimeout(a,b.errorDelay)}}function q(a,k){for(var m=!1,f=[],u=[],e,i=a.length;i--;){var g="";k&&k[i]?e=k[i]:(e=(a[i].href?a[i].href:"window.location.href").split("/"),e.pop(),(e=e.join("/"))&&(e+="/"));if(a[i].cssRules||a[i].rules){s=a[i].cssRules?a[i].cssRules:a[i].rules;for(var d=s.length;d--;)if(s[d].style&&s[d].style.cssText){var r=
s[d].style.cssText;r.toLowerCase().indexOf("url")!=-1&&(g+=r)}else s[d].styleSheet&&(f.push(s[d].styleSheet),m=!0)}if(g=g.match(/[^\("]+\.(gif|jpg|jpeg|png)/g))for(d=g.length;d--;)r=g[d].charAt(0)=="/"||g[d].match("://")?g[d]:e+g[d],jQuery.inArray(r,c)==-1&&c.push(r);if(!m&&a[i].imports&&a[i].imports.length){g=0;for(d=a[i].imports.length;g<d;g++)r=a[i].imports[g].href,r=r.split("/"),r.pop(),(r=r.join("/"))&&(r+="/"),r=r.charAt(0)=="/"||r.match("://")?r:e+r,u.push(r),f.push(a[i].imports[g])}}if(f.length)return q(f,
u),!1;for(m=b.simultaneousCacheLoading;m--;)setTimeout(n,m)}var b=jQuery.extend({statusTextEl:null,statusBarEl:null,errorDelay:999,simultaneousCacheLoading:2},b),m=0,c=[],s,k;q(document.styleSheets);return c};
